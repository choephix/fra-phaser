/// <reference path="../def/phaser.d.ts" />
// import './style.css';

class GameScene1 extends Phaser.Scene {
  preload() {
    this.load.image('dumoria', 'https://c.staticblitz.com/assets/client/icons/ui/blue-lightning-b6f0711fda280ec6bd873c9391fc89c4.png');
    this.load.spritesheet(
      'whale',
      'https://i.imgur.com/hhO6Rkt.png',
      { frameWidth: 280, frameHeight: 160, endFrame: 7 }
    )

    this.load.setBaseURL('http://labs.phaser.io');

    this.load.image('sky', 'assets/skies/space3.png');
    this.load.image('logo', 'assets/sprites/phaser3-logo.png');
    this.load.image('red', 'assets/particles/red.png');

  }

  create() {
      
    this.add.image(400, 300, 'sky');

    this.add.sprite(500, 500, 'dumoria');

    let sprite = this.add.sprite(200, 200, 'whale')

    let anim = this.anims.create({
        key: 'snooze',
        frames: this.anims.generateFrameNumbers('whale',{}),
        frameRate: 20,
        repeat: -1
    })

    console.log(anim);
    sprite.anims.load('snooze');

    sprite.anims.play('snooze');

    var particles = this.add.particles('red');
    var emitter = particles.createEmitter({
        speed: 100,
        scale: { start: 1, end: 0 }
    });

    particles.x = 300
    particles.y = 300

    var logo = this.add.image(400, 100, 'logo');

    emitter.startFollow(logo);
  }
}

var config:GameConfig = {
  title: "Furry Robots Attak",
  version: "0.2.0",
  type: Phaser.AUTO,
  parent: "phaser",
  backgroundColor: "#014",
  height: window.innerHeight,
  width: window.innerHeight*9/16,
  // width: window.innerWidth,
  zoom: 1,
  scene: new GameScene({})
}
var game:Phaser.Game = new Phaser.Game(config);

function test():void
{
  alert("ouch!")
}